
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">

    <title>spring cloud 源码分析</title>
    <meta name="description" content="">
    <meta name="author" content="Meedesidy">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <link href="/assets/themes//resources/bootstrap/css/bootstrap.min.css" rel="stylesheet">
  
    <!--[if lt IE 9]>
      <script src="/assets/themes//resources/respond/Respond.min.js"></script>
    <![endif]-->

    <link href="/atom.xml" type="application/atom+xml" rel="alternate" title="Sitewide ATOM Feed">
    <link href="/rss.xml" type="application/rss+xml" rel="alternate" title="Sitewide RSS Feed">

  </head>

  <body>
    <nav class="navbar navbar-default" role="navigation">
      <div class="container">
        <div class="navbar-header">
          <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-ex1-collapse">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </button>
          <a class="navbar-brand" href="/">Meedesidy Blog</a>
        </div>

        <div class="collapse navbar-collapse navbar-ex1-collapse">
          <ul class="nav navbar-nav">
            
            
            


  
    
      
      	
      	<li><a href="/archive">文档</a></li>
      	
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
      	
      	<li><a href="/tags">标签</a></li>
      	
      
    
  



          </ul>
        </div>
      </div>
    </nav>
    <div class="container">
      
<div class="page-header">
  <h1>spring cloud 源码分析 </h1>
</div>

<div class="row post-full">
  <div class="col-md-12">
    <div class="date">
      <span>23 August 2017</span>
    </div>
    <div class="content">
      
<h3 id="注解enablediscoveryclient">注解　@EnableDiscoveryClient</h3>

<blockquote>
  <p>功能: 开启一个<code>DiscoveryClient</code>实例</p>
</blockquote>

<p>####　org.springframework.cloud.client.discovery.DiscoveryClient
定义了用来发现服务的常用抽象方法，所以使用<code>spring cloud</code> 构建的微服务可以方便的切换不同的服务治理框架，而不需要改动代码</p>
<pre><code class="language-java">public interface DiscoveryClient {

	/**
	 * A human readable description of the implementation, used in HealthIndicator
	 * @return the description
	 */
	public String description();

	/**
	 * @return ServiceInstance with information used to register the local service
	 */
	public ServiceInstance getLocalServiceInstance();

	/**
	 * Get all ServiceInstances associated with a particular serviceId
	 * @param serviceId the serviceId to query
	 * @return a List of ServiceInstance
	 */
	public List&lt;ServiceInstance&gt; getInstances(String serviceId);

	/**
	 * @return all known service ids
	 */
	public List&lt;String&gt; getServices();

}
</code></pre>

<h4 id="orgspringframeworkcloudnetflixeurekaeurekadiscoveryclient">org.springframework.cloud.netflix.eureka.EurekaDiscoveryClient</h4>
<p>是<code>DiscoveryClient</code>接口的一个实现，从命名来看，他是<code>Eureka</code>发现服务的封装，所以<code>EurekaDiscoveryClient</code>依赖<code>Eureka</code>的服务接口<code>com.netflix.discovery.EurekaClient</code>.</p>

<p><code>EurekaClient</code>的类注释</p>
<pre><code class="language-java"> * EurekaClient API contracts are:
 *  - provide the ability to get InstanceInfo(s) (in various different ways)
 *  - provide the ability to get data about the local Client (known regions, own AZ etc)
 *  - provide the ability to register and access the healthcheck handler for the client
 *
</code></pre>
<p>EurekaClient　API 负责的任务：</p>
<blockquote>
  <p>提供通过各种不同的方式获取实例（服务）信息</p>
</blockquote>

<blockquote>
  <p>提供获取本地client（服务）</p>
</blockquote>

<blockquote>
  <p>检查登记处理程序的client(服务)</p>
</blockquote>

<h4 id="comnetflixdiscoverysharedlookupservice">com.netflix.discovery.shared.LookupService</h4>

<blockquote>
  <p>寻找服务</p>
</blockquote>

<h4 id="comnetflixdiscoverydiscoveryclient">com.netflix.discovery.DiscoveryClient</h4>

<p><code>Eureka</code> 真正用来发现服务的类</p>

<blockquote>
  <p>这个类帮助与<code>Eureka Service</code>相互协作</p>
</blockquote>

<p><code>Eureka Service</code> 负责下面的任务：</p>

<blockquote>
  <p>向<code>Eureka Service</code>注册服务实例</p>
</blockquote>

<blockquote>
  <p>向<code>Eureka Service</code>服务租约</p>
</blockquote>

<blockquote>
  <p>当服务关闭期间，向<code>Eureka Service</code>取消租约</p>
</blockquote>

<blockquote>
  <p>查询<code>Eureka Service</code>中的服务实例列表</p>
</blockquote>

<blockquote>
  <p><code>Eureka Client</code>还需要一个<code>Eureka Service</code>的<code>URL</code>列表</p>
</blockquote>

    </div>

    

    

    <hr>
    
    <ul class="pagination">
      
        <li class="prev"><a href="/2017/08/23/java-8-%E6%96%B0%E7%89%B9%E6%80%A7" title="java 8 新特性">&larr; Previous</a></li>
      
        <li><a href="/archive.html">Archive</a></li>
      
        <li class="next disabled"><a>Next &rarr;</a>
      
    </ul>
    <hr>
  </div>
</div>


      <hr>
      <footer>
        <p>
          &copy; 2017 Meedesidy
        </p>
      </footer>
    </div>

    

    <script src="/assets/themes//resources/jquery/jquery.min.js"></script>
    <script src="/assets/themes//resources/bootstrap/js/bootstrap.min.js"></script>
  </body>
</html>

