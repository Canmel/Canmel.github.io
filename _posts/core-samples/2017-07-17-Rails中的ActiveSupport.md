---
layout: post
title: "Rails中的ActiveSupport"
author: "meedesidy"
meta: "Springfield"
tag: [Ruby, Rails, summary]
---

## Rails中的ActiveSupport

> Rails::Railtie is the core of the Rails framework and provides several hooks to extend Rails and/or modify the initialization process.


**Rails::Railties 是Rails框架核心，并提供了几个钩子扩展Rails和/或修改初始化过程。**

### 得到gem
> rails new appname

Rails::Railties 是Rails框架核心,创建rails程序,`External Libraries`　中会看到　`Railties`的gem

### 启动

**`rails s` , 是程序开始的地方**

1. 首先会执行　`RUBY_PATH/bin/rails`, 具体是这个样子的：

    ```ruby
    #!/usr/bin/env ruby
    #
    # This file was generated by RubyGems.
    #
    # The application 'railties' is installed as part of a gem, and
    # this file is here to facilitate running it.
    #
    
    require 'rubygems'
    
    version = ">= 0.a"
    
    if ARGV.first
      str = ARGV.first
      str = str.dup.force_encoding("BINARY") if str.respond_to? :force_encoding
      if str =~ /\A_(.*)_\z/ and Gem::Version.correct?($1) then
        version = $1
        ARGV.shift
      end
    end
    
    gem 'railties', version
    load Gem.bin_path('railties', 'rails', version)
    ```

2. 接着执行　`load Gem.bin_path('railties', 'rails', version)`(文件在`RUBY_PATH/rubygems.rb`), 加载gem包下可执行文件

    - 加载的gem包含`ActiveSupport`
    
    - `ActiveSupport`中定义了很多类和方法，如：　`lib/active_support/core_ext/object/blank.rb`
    
    ```ruby
    class NilClass
      # +nil+ is blank:
      #
      #   nil.blank? # => true
      #
      # @return [true]
      def blank?
        true
      end
    end
    ```
    - 这样就可以得到
    
        > irb(main):001:0> nil.blank? => true`